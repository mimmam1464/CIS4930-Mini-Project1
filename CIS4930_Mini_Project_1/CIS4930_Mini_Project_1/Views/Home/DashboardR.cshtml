@using CIS4930_Mini_Project_1.Models
@using CIS4930_Mini_Project_1.Models.cis4930dbTableAdapters
@{
    //The SQL Server Task Table
    var todoAgent = new TODOLISTTableAdapter();
    var todoTable = new cis4930db.TODOLISTDataTable();
    todoAgent.Fill(todoTable);
}

    <table class="table">
        <!--Add Items-->
        <thead>
            <th>Task</th>
            <th>Completed Task</th>
            <th>Delete Task</th>
            </thead>
        <tbody>
        <tr>
            <td>
                <input type="text" placeholder="Task to Add" name="task" />
                <input class="btn-primary" type="button" value="Update"/>
            </td>
        </tr>
        
        @for (int i = 0; i < todoTable.Count; i++)
        {
            <tr>
               
                <td>@todoTable[i].todo</td>
                @if (todoTable[i].completed)
                {
                    using (Html.BeginForm("CompleteToDo", "AccountR", new TodoModel {index = todoTable[i].index, isComplete = false}))
                    {
                        <td>
                            <input class="btn-success" type="submit" value="Complete" name="isCompleted"/>
                        </td>
                    }
                }
                else
                {
                    using (Html.BeginForm("CompleteToDo", "AccountR", new TodoModel {index = todoTable[i].index, isComplete = true}))
                    {
                        <td>
                            <input class="btn-secondary" type="submit" value="Mark Complete"/>
                        </td>
                    }
                }
            @using (Html.BeginForm("DeleteToDo", "AccountR", new TodoModel { index = todoTable[i].index }))
            {
                <td>
                    <input type="submit" class="btn-danger" id="deleteTask" value="Delete" />
                </td>
            }
            </tr>

                }
       
</tbody>
    </table>

